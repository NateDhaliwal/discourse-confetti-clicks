<script type="text/discourse-plugin" version="1.14.0">
  // Load the external script
  var script = document.createElement('script');
  script.src = "https://cdn.jsdelivr.net/npm/@tsparticles/confetti@3.0.3/tsparticles.confetti.bundle.min.js";
  document.head.appendChild(script);

  // Define settings variables outside of onload
  const confettiAmount = settings.confetti_amount; // Note: Removed interpolation syntax
  const confettiSpread = settings.confetti_spread; // Note: Removed interpolation syntax

  // Wait for the script to load before using it
  script.onload = function() {
    window.addEventListener('click', function (e) {
      let xpos = e.clientX;
      let ypos = e.clientY;
      window.confetti({ // Assume confetti is globally accessible after script load
        particleCount: confettiAmount,
        spread: confettiSpread,
        origin: { y: ypos/window.innerHeight , x: xpos/window.innerWidth },
      });
    });
  };
</script>
